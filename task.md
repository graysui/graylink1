# GrayLink 项目开发任务清单

## 紧急修复任务（优先级最高）

### 1. 类型系统修复
- [ ] 统一前后端接口类型定义
  - [ ] 完善 SystemSettings 类型定义
  - [ ] 补充 Google Drive API 相关类型
  - [ ] 添加 Emby 配置类型验证
  - [ ] 规范化错误响应类型

### 2. 配置系统重构
- [ ] 统一配置管理
  - [ ] 重构配置模型结构
  - [ ] 添加配置验证机制
  - [ ] 实现配置迁移功能
  - [ ] 完善配置默认值

### 3. 组件修复
- [ ] PathSelector 组件
  - [ ] 修复路径验证逻辑
  - [ ] 添加错误处理
  - [ ] 完善类型定义
  - [ ] 优化用户交互

### 4. API 一致性修复
- [ ] Google Drive API
  - [ ] 统一授权范围定义
  - [ ] 完善错误处理机制
  - [ ] 添加缺失的测试接口
  - [ ] 规范化响应格式

## 后续优化任务

### 1. 类型系统优化
- [ ] 添加运行时类型检查
- [ ] 完善类型推导
- [ ] 添加类型测试
- [ ] 生成类型文档

### 2. 配置管理优化
- [ ] 添加配置版本控制
- [ ] 实现配置备份恢复
- [ ] 添加配置变更日志
- [ ] 优化配置加载性能

### 3. 组件系统优化
- [ ] 提取通用逻辑
- [ ] 添加组件测试
- [ ] 优化组件性能
- [ ] 完善组件文档

### 4. API 系统优化
- [ ] 添加 API 版本控制
- [ ] 实现请求缓存
- [ ] 优化错误处理
- [ ] 完善 API 文档

## 执行计划

### 第一阶段（1-2天）
1. 修复类型定义
2. 统一配置模型
3. 修复组件错误

### 第二阶段（2-3天）
1. 完善 API 接口
2. 添加错误处理
3. 补充单元测试

### 第三阶段（3-4天）
1. 系统优化
2. 性能提升
3. 文档完善

## 注意事项
1. 保持前后端类型定义同步
2. 确保配置向后兼容
3. 添加必要的错误处理
4. 及时更新文档 

# TypeScript 类型错误修复任务清单

## 1. Element Plus 相关错误
- [ ] 修复 zh-cn.mjs 声明文件缺失问题 (App.vue)
- [ ] 修复 ProgressBar 组件类型错误
- [ ] 修复 Form Rules 类型错误
- [ ] 添加 @element-plus/icons-vue 类型定义

## 2. 路由相关错误
- [ ] 添加 NavigationFailure 类型
- [ ] 添加 RouteRecordNormalized 类型
- [ ] 修复 Router 类型递归引用问题
- [ ] 修复字符串路由跳转类型错误 ('/login', '/' 等)

## 3. API/类型定义错误
- [ ] 添加 SystemSettings 类型定义
- [ ] 添加 DirListItem 类型定义
- [ ] 修复 MonitorLog 类型错误
- [ ] 修复 axios InternalAxiosRequestConfig 错误

## 4. 组件属性错误
- [ ] 添加 PathSelector 组件缺失方法 (listDir, createDir)
- [ ] 修复 Setting 组件属性缺失 (server_url, library_path)
- [ ] 修复 ProgressBar 组件 percentage 属性缺失

## 5. Vue 组件方法错误
- [ ] 添加 resetForm 方法
- [ ] 添加 submitForm 方法
- [ ] 添加 handlePathMappingChange 方法

## 6. Meta 数据错误
- [ ] 修复 Breadcrumb redirect 属性错误
- [ ] 添加 refresh_token 属性

## 优先级顺序
1. Element Plus 类型错误（影响范围最大）
2. API/类型定义错误（基础类型）
3. 路由相关错误（核心功能）
4. 组件属性错误
5. Vue 组件方法错误
6. Meta 数据错误

## 注意事项
- 修复时需要保持类型的严格性
- 确保修复后不会引入新的类型错误
- 需要同时更新相关的文档和注释
- 修改后需要运行完整的类型检查确认问题解决 